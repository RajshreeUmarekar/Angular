import { Component, EventEmitter, forwardRef, Inject, Input, Output, ViewChild, } from "@angular/core";
import { NG_VALUE_ACCESSOR, } from "@angular/forms";
import { MatLegacyAutocompleteTrigger as MatAutocompleteTrigger, } from "@angular/material/legacy-autocomplete";
import { BehaviorSubject, combineLatest, fromEvent, Subject } from "rxjs";
import { debounceTime, startWith, takeUntil } from "rxjs/operators";
import { MatSelectCountryLangToken } from "./tokens";
import * as i0 from "@angular/core";
import * as i1 from "@angular/common";
import * as i2 from "@angular/forms";
import * as i3 from "@angular/material/input";
import * as i4 from "@angular/material/form-field";
import * as i5 from "@angular/material/autocomplete";
import * as i6 from "@angular/material/core";
import * as i7 from "@angular/material/icon";
import * as i8 from "@angular/material/progress-bar";
import * as i9 from "./join.pipe";
/**
 * @author Anthony Nahas
 * @since 11.19
 * @version 2.1.0
 */
export class MatSelectCountryComponent {
    constructor(i18n, cdRef) {
        this.i18n = i18n;
        this.cdRef = cdRef;
        this.appearance = "outline";
        this.countries = [];
        this.placeHolder = "Select country";
        this.showCallingCode = false;
        this.excludedCountries = [];
        this.name = "country";
        this.error = "";
        this.cleareable = false;
        this.formControl = undefined;
        // tslint:disable-next-line: no-output-on-prefix
        this.onCountrySelected = new EventEmitter();
        this.debounceTime = 300;
        this.filterString = "";
        this.modelChanged = new Subject();
        this.countries$ = new BehaviorSubject([]);
        this.excludedCountries$ = new BehaviorSubject([]);
        this.value$ = new BehaviorSubject(null);
        this.unsubscribe$ = new Subject();
        this.propagateChange = (_) => { };
    }
    get value() {
        return this._value;
    }
    set value(value) {
        // setting a value on a reactive form (formControlName) doesn't trigger ngOnChanges but it does call this setter
        this.value$.next(value);
    }
    ngOnInit() {
        combineLatest([this.countries$, this.value$, this.excludedCountries$])
            .pipe(
        // fixing the glitch on combineLatest https://blog.strongbrew.io/combine-latest-glitch/
        debounceTime(0), takeUntil(this.unsubscribe$))
            .subscribe(([countries, value, excludedCountries]) => {
            this._populateCountries(countries, excludedCountries);
            if (value) {
                this._setValue(value);
            }
        });
        if (!this.countries.length) {
            this._loadCountriesFromDb();
        }
        this.modelChanged
            .pipe(startWith(""), debounceTime(this.debounceTime), takeUntil(this.unsubscribe$))
            .subscribe((value) => {
            this.filterString = value;
            this._filter(value);
        });
    }
    ngOnChanges(changes) {
        if (changes.countries?.currentValue) {
            this.countries$.next(changes.countries.currentValue);
        }
        if (changes.excludedCountries?.currentValue) {
            this.excludedCountries$.next(changes.excludedCountries.currentValue);
        }
        if (changes.language?.currentValue &&
            changes.language.currentValue !== changes.language.previousValue) {
            console.log("Change on language detected", changes.language);
            let lastValue = this._value;
            this.filterString = "";
            this.inputChanged("");
            this._setValue(null);
            this.onCountrySelected.emit(null);
            this._loadCountriesFromDb(lastValue?.alpha2Code);
        }
    }
    onBlur() {
        if (this.nullable &&
            !this.inputElement.value &&
            this.statesAutocompleteRef.panel) {
            this._setValue(null);
            this.onCountrySelected.emit(null);
        }
    }
    onOptionsSelected($event) {
        const value = this.countries.find((country) => country.name === $event.option.value);
        this._setValue(value);
        this.onCountrySelected.emit(value);
    }
    writeValue(obj) {
        if (obj) {
            this.value = obj;
        }
    }
    registerOnChange(fn) {
        this.propagateChange = fn;
    }
    registerOnTouched(fn) {
        // throw new Error('Method not implemented.');
    }
    setDisabledState(isDisabled) {
        this.disabled = isDisabled;
    }
    autocompleteScroll() {
        if (this.itemsLoadSize) {
            setTimeout(() => {
                if (this.statesAutocompleteRef &&
                    this.autocompleteTrigger &&
                    this.statesAutocompleteRef.panel) {
                    fromEvent(this.statesAutocompleteRef.panel.nativeElement, "scroll")
                        .pipe(takeUntil(this.autocompleteTrigger.panelClosingActions))
                        .subscribe(() => {
                        const scrollTop = this.statesAutocompleteRef.panel.nativeElement.scrollTop;
                        const scrollHeight = this.statesAutocompleteRef.panel.nativeElement.scrollHeight;
                        const elementHeight = this.statesAutocompleteRef.panel.nativeElement.clientHeight;
                        const atBottom = scrollHeight === scrollTop + elementHeight;
                        if (atBottom) {
                            // fetch more data if not filtered
                            if (this.filterString === "") {
                                const fromIndex = this.filteredOptions.length;
                                const toIndex = +this.filteredOptions.length + +this.itemsLoadSize;
                                this.filteredOptions = [
                                    ...this.filteredOptions,
                                    ...this.countries.slice(fromIndex, toIndex),
                                ];
                            }
                        }
                    });
                }
            });
        }
    }
    inputChanged(value) {
        this.modelChanged.next(value);
    }
    ngOnDestroy() {
        this.unsubscribe$.next();
        this.unsubscribe$.complete();
    }
    clear() {
        this.filterString = "";
        this.inputChanged("");
        this._setValue(null);
        this.onCountrySelected.emit(null);
    }
    _loadCountriesFromDb(alpha2Code) {
        this.loadingDB = true;
        this._importLang()
            .then((res) => {
            this.countries$.next(res);
            this._setValue(res.find((el) => el.alpha2Code == alpha2Code));
        })
            .catch((err) => console.error("Error: " + err))
            .finally(() => (this.loadingDB = false));
    }
    _populateCountries(countries, excludedCountries) {
        const excludeCountries = excludedCountries.map((c) => c.alpha2Code);
        this.countries = countries.filter((c) => !excludeCountries.includes(c.alpha2Code));
    }
    _setValue(value) {
        if (value && (!value.name || value.name === "Unknown")) {
            // lookup name based on alpha2 values could be extended to lookup on other values too
            const matchingCountry = this.countries.find((c) => c.alpha2Code === value.alpha2Code);
            if (!!matchingCountry) {
                value = matchingCountry;
            }
        }
        this._value = value?.name ? value : null;
        this.propagateChange(this._value);
    }
    _importLang() {
        const lang = this.language || this.i18n;
        switch (lang) {
            case "br":
                return import("./i18n/br")
                    .then((result) => result.COUNTRIES_DB_BR)
                    .then((y) => y);
            case "by":
                return import("./i18n/by")
                    .then((result) => result.COUNTRIES_DB_BY)
                    .then((y) => y);
            case "de":
                return import("./i18n/de")
                    .then((result) => result.COUNTRIES_DB_DE)
                    .then((y) => y);
            case "es":
                return import("./i18n/es")
                    .then((result) => result.COUNTRIES_DB_ES)
                    .then((y) => y);
            case "fr":
                return import("./i18n/fr")
                    .then((result) => result.COUNTRIES_DB_FR)
                    .then((y) => y);
            case "hr":
                return import("./i18n/hr")
                    .then((result) => result.COUNTRIES_DB_HR)
                    .then((y) => y);
            case "hu":
                return import("./i18n/hu")
                    .then((result) => result.COUNTRIES_DB_HU)
                    .then((y) => y);
            case "it":
                return import("./i18n/it")
                    .then((result) => result.COUNTRIES_DB_IT)
                    .then((y) => y);
            case "nl":
                return import("./i18n/nl")
                    .then((result) => result.COUNTRIES_DB_NL)
                    .then((y) => y);
            case "pt":
                return import("./i18n/pt")
                    .then((result) => result.COUNTRIES_DB_PT)
                    .then((y) => y);
            case "ru":
                return import("./i18n/ru")
                    .then((result) => result.COUNTRIES_DB_RU)
                    .then((y) => y);
            case "ua":
                return import("./i18n/ua")
                    .then((result) => result.COUNTRIES_DB_UA)
                    .then((y) => y);
            case "gl":
                return import("./i18n/gl")
                    .then((result) => result.COUNTRIES_DB_GL)
                    .then((y) => y);
            case "eu":
                return import("./i18n/eu")
                    .then((result) => result.COUNTRIES_DB_EU)
                    .then((y) => y);
            case "ca":
                return import("./i18n/ca")
                    .then((result) => result.COUNTRIES_DB_CA)
                    .then((y) => y);
            default:
                return import("./i18n/en")
                    .then((result) => result.COUNTRIES_DB)
                    .then((y) => y);
        }
    }
    _filter(value) {
        const filterValue = value.toLowerCase();
        // if not filtered, fetch reduced array
        if (this.itemsLoadSize && filterValue === "") {
            this.filteredOptions = this.countries.slice(0, this.itemsLoadSize);
        }
        else {
            this.filteredOptions = this.countries.filter((option) => option.name.toLowerCase().includes(filterValue) ||
                option.alpha2Code.toLowerCase().includes(filterValue) ||
                option.alpha3Code.toLowerCase().includes(filterValue));
        }
        // options in the UI are not updated when this component is used within a host component that uses OnPush
        this.cdRef.markForCheck();
    }
}
MatSelectCountryComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "15.0.1", ngImport: i0, type: MatSelectCountryComponent, deps: [{ token: forwardRef(() => MatSelectCountryLangToken) }, { token: i0.ChangeDetectorRef }], target: i0.ɵɵFactoryTarget.Component });
MatSelectCountryComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "14.0.0", version: "15.0.1", type: MatSelectCountryComponent, selector: "mat-select-country", inputs: { appearance: "appearance", countries: "countries", label: "label", placeHolder: "placeHolder", required: "required", disabled: "disabled", nullable: "nullable", readonly: "readonly", tabIndex: "tabIndex", class: "class", itemsLoadSize: "itemsLoadSize", loading: "loading", showCallingCode: "showCallingCode", excludedCountries: "excludedCountries", autocomplete: "autocomplete", language: "language", name: "name", error: "error", cleareable: "cleareable", formControl: "formControl", value: "value" }, outputs: { onCountrySelected: "onCountrySelected" }, providers: [
        {
            provide: NG_VALUE_ACCESSOR,
            useExisting: forwardRef(() => MatSelectCountryComponent),
            multi: true,
        },
    ], viewQueries: [{ propertyName: "statesAutocompleteRef", first: true, predicate: ["countryAutocomplete"], descendants: true }, { propertyName: "autocompleteTrigger", first: true, predicate: MatAutocompleteTrigger, descendants: true }, { propertyName: "inputElement", first: true, predicate: ["inputElement"], descendants: true }], usesOnChanges: true, ngImport: i0, template: "<mat-form-field [appearance]=\"appearance\">\n  <mat-label *ngIf=\"label\">{{ label }}</mat-label>\n  <mat-icon\n    *ngIf=\"this.value\"\n    [svgIcon]=\"this.value?.alpha2Code?.toLowerCase()\"\n    class=\"mr-12 s-20 secondary-text\"\n    matSuffix\n  ></mat-icon>\n  <input\n    *ngIf=\"!!formControl\"\n    (blur)=\"onBlur()\"\n    (input)=\"inputChanged($event?.target?.value)\"\n    [class]=\"class\"\n    [matAutocomplete]=\"this.countryAutocomplete\"\n    [placeholder]=\"this.placeHolder\"\n    [readonly]=\"this.readonly\"\n    [tabIndex]=\"tabIndex\"\n    [value]=\"formControl.value?.name\"\n    [formControl]=\"formControl\"\n    [autocomplete]=\"this.autocomplete\"\n    [name]=\"this.name\"\n    aria-label=\"country\"\n    matInput\n    type=\"text\"\n    #inputElement\n  />\n  <input\n    *ngIf=\"!formControl\"\n    (blur)=\"onBlur()\"\n    (input)=\"inputChanged($event?.target?.value)\"\n    [class]=\"class\"\n    [matAutocomplete]=\"this.countryAutocomplete\"\n    [placeholder]=\"this.placeHolder\"\n    [readonly]=\"this.readonly\"\n    [tabIndex]=\"tabIndex\"\n    [value]=\"\n      showCallingCode\n        ? this.value\n          ? this.value?.name + ' (' + this.value?.callingCode + ')'\n          : ''\n        : this.value?.name\n    \"\n    [required]=\"this.required\"\n    [disabled]=\"this.disabled || this.loadingDB\"\n    [autocomplete]=\"this.autocomplete\"\n    [name]=\"this.name\"\n    aria-label=\"country\"\n    matInput\n    type=\"text\"\n    #inputElement\n  />\n  <mat-progress-bar\n    *ngIf=\"this.loadingDB || this.loading\"\n    mode=\"buffer\"\n  ></mat-progress-bar>\n  <mat-autocomplete\n    #countryAutocomplete=\"matAutocomplete\"\n    (opened)=\"autocompleteScroll()\"\n    (optionSelected)=\"onOptionsSelected($event)\"\n  >\n    <mat-option *ngFor=\"let country of filteredOptions\" [value]=\"country?.name\">\n      <div class=\"d-flex\">\n        <mat-icon [svgIcon]=\"country?.alpha2Code?.toLowerCase()\"></mat-icon>\n        <small\n          class=\"country-list-item\"\n          [title]=\"[country?.name, country?.alpha3Code] | joinStrings\"\n          *ngIf=\"!showCallingCode\"\n          >{{ [country?.name, country?.alpha3Code] | joinStrings }}</small\n        >\n        <small\n          class=\"country-list-item\"\n          [title]=\"\n            [country?.name, '(' + country?.callingCode + ')']\n              | joinStrings : ' '\n          \"\n          *ngIf=\"showCallingCode\"\n          >{{\n            [country?.name, \"(\" + country?.callingCode + \")\"]\n              | joinStrings : \" \"\n          }}</small\n        >\n      </div>\n    </mat-option>\n  </mat-autocomplete>\n  <mat-icon\n    class=\"cursor-pointer pos-rel\"\n    matSuffix\n    *ngIf=\"cleareable && !!value\"\n    (click)=\"clear()\"\n    >cancel</mat-icon\n  >\n  <mat-error *ngIf=\"formControl && formControl.invalid\">{{ error }}</mat-error>\n</mat-form-field>\n", styles: [".cursor-pointer{cursor:pointer}.pos-rel{position:relative}.country-list-item{float:right;margin-left:.5rem;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.d-flex{display:flex;width:100%}\n"], dependencies: [{ kind: "directive", type: i1.NgForOf, selector: "[ngFor][ngForOf]", inputs: ["ngForOf", "ngForTrackBy", "ngForTemplate"] }, { kind: "directive", type: i1.NgIf, selector: "[ngIf]", inputs: ["ngIf", "ngIfThen", "ngIfElse"] }, { kind: "directive", type: i2.DefaultValueAccessor, selector: "input:not([type=checkbox])[formControlName],textarea[formControlName],input:not([type=checkbox])[formControl],textarea[formControl],input:not([type=checkbox])[ngModel],textarea[ngModel],[ngDefaultControl]" }, { kind: "directive", type: i2.NgControlStatus, selector: "[formControlName],[ngModel],[formControl]" }, { kind: "directive", type: i2.FormControlDirective, selector: "[formControl]", inputs: ["formControl", "disabled", "ngModel"], outputs: ["ngModelChange"], exportAs: ["ngForm"] }, { kind: "directive", type: i3.MatInput, selector: "input[matInput], textarea[matInput], select[matNativeControl],      input[matNativeControl], textarea[matNativeControl]", inputs: ["disabled", "id", "placeholder", "name", "required", "type", "errorStateMatcher", "aria-describedby", "value", "readonly"], exportAs: ["matInput"] }, { kind: "component", type: i4.MatFormField, selector: "mat-form-field", inputs: ["hideRequiredMarker", "color", "floatLabel", "appearance", "subscriptSizing", "hintLabel"], exportAs: ["matFormField"] }, { kind: "directive", type: i4.MatLabel, selector: "mat-label" }, { kind: "directive", type: i4.MatError, selector: "mat-error, [matError]", inputs: ["id"] }, { kind: "directive", type: i4.MatSuffix, selector: "[matSuffix], [matIconSuffix], [matTextSuffix]" }, { kind: "component", type: i5.MatAutocomplete, selector: "mat-autocomplete", inputs: ["disableRipple"], exportAs: ["matAutocomplete"] }, { kind: "component", type: i6.MatOption, selector: "mat-option", exportAs: ["matOption"] }, { kind: "directive", type: i5.MatAutocompleteTrigger, selector: "input[matAutocomplete], textarea[matAutocomplete]", exportAs: ["matAutocompleteTrigger"] }, { kind: "component", type: i7.MatIcon, selector: "mat-icon", inputs: ["color", "inline", "svgIcon", "fontSet", "fontIcon"], exportAs: ["matIcon"] }, { kind: "component", type: i8.MatProgressBar, selector: "mat-progress-bar", inputs: ["color", "value", "bufferValue", "mode"], outputs: ["animationEnd"], exportAs: ["matProgressBar"] }, { kind: "pipe", type: i9.JoinStringsPipe, name: "joinStrings" }] });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "15.0.1", ngImport: i0, type: MatSelectCountryComponent, decorators: [{
            type: Component,
            args: [{ selector: "mat-select-country", providers: [
                        {
                            provide: NG_VALUE_ACCESSOR,
                            useExisting: forwardRef(() => MatSelectCountryComponent),
                            multi: true,
                        },
                    ], template: "<mat-form-field [appearance]=\"appearance\">\n  <mat-label *ngIf=\"label\">{{ label }}</mat-label>\n  <mat-icon\n    *ngIf=\"this.value\"\n    [svgIcon]=\"this.value?.alpha2Code?.toLowerCase()\"\n    class=\"mr-12 s-20 secondary-text\"\n    matSuffix\n  ></mat-icon>\n  <input\n    *ngIf=\"!!formControl\"\n    (blur)=\"onBlur()\"\n    (input)=\"inputChanged($event?.target?.value)\"\n    [class]=\"class\"\n    [matAutocomplete]=\"this.countryAutocomplete\"\n    [placeholder]=\"this.placeHolder\"\n    [readonly]=\"this.readonly\"\n    [tabIndex]=\"tabIndex\"\n    [value]=\"formControl.value?.name\"\n    [formControl]=\"formControl\"\n    [autocomplete]=\"this.autocomplete\"\n    [name]=\"this.name\"\n    aria-label=\"country\"\n    matInput\n    type=\"text\"\n    #inputElement\n  />\n  <input\n    *ngIf=\"!formControl\"\n    (blur)=\"onBlur()\"\n    (input)=\"inputChanged($event?.target?.value)\"\n    [class]=\"class\"\n    [matAutocomplete]=\"this.countryAutocomplete\"\n    [placeholder]=\"this.placeHolder\"\n    [readonly]=\"this.readonly\"\n    [tabIndex]=\"tabIndex\"\n    [value]=\"\n      showCallingCode\n        ? this.value\n          ? this.value?.name + ' (' + this.value?.callingCode + ')'\n          : ''\n        : this.value?.name\n    \"\n    [required]=\"this.required\"\n    [disabled]=\"this.disabled || this.loadingDB\"\n    [autocomplete]=\"this.autocomplete\"\n    [name]=\"this.name\"\n    aria-label=\"country\"\n    matInput\n    type=\"text\"\n    #inputElement\n  />\n  <mat-progress-bar\n    *ngIf=\"this.loadingDB || this.loading\"\n    mode=\"buffer\"\n  ></mat-progress-bar>\n  <mat-autocomplete\n    #countryAutocomplete=\"matAutocomplete\"\n    (opened)=\"autocompleteScroll()\"\n    (optionSelected)=\"onOptionsSelected($event)\"\n  >\n    <mat-option *ngFor=\"let country of filteredOptions\" [value]=\"country?.name\">\n      <div class=\"d-flex\">\n        <mat-icon [svgIcon]=\"country?.alpha2Code?.toLowerCase()\"></mat-icon>\n        <small\n          class=\"country-list-item\"\n          [title]=\"[country?.name, country?.alpha3Code] | joinStrings\"\n          *ngIf=\"!showCallingCode\"\n          >{{ [country?.name, country?.alpha3Code] | joinStrings }}</small\n        >\n        <small\n          class=\"country-list-item\"\n          [title]=\"\n            [country?.name, '(' + country?.callingCode + ')']\n              | joinStrings : ' '\n          \"\n          *ngIf=\"showCallingCode\"\n          >{{\n            [country?.name, \"(\" + country?.callingCode + \")\"]\n              | joinStrings : \" \"\n          }}</small\n        >\n      </div>\n    </mat-option>\n  </mat-autocomplete>\n  <mat-icon\n    class=\"cursor-pointer pos-rel\"\n    matSuffix\n    *ngIf=\"cleareable && !!value\"\n    (click)=\"clear()\"\n    >cancel</mat-icon\n  >\n  <mat-error *ngIf=\"formControl && formControl.invalid\">{{ error }}</mat-error>\n</mat-form-field>\n", styles: [".cursor-pointer{cursor:pointer}.pos-rel{position:relative}.country-list-item{float:right;margin-left:.5rem;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.d-flex{display:flex;width:100%}\n"] }]
        }], ctorParameters: function () { return [{ type: undefined, decorators: [{
                    type: Inject,
                    args: [forwardRef(() => MatSelectCountryLangToken)]
                }] }, { type: i0.ChangeDetectorRef }]; }, propDecorators: { appearance: [{
                type: Input
            }], countries: [{
                type: Input
            }], label: [{
                type: Input
            }], placeHolder: [{
                type: Input
            }], required: [{
                type: Input
            }], disabled: [{
                type: Input
            }], nullable: [{
                type: Input
            }], readonly: [{
                type: Input
            }], tabIndex: [{
                type: Input
            }], class: [{
                type: Input
            }], itemsLoadSize: [{
                type: Input
            }], loading: [{
                type: Input
            }], showCallingCode: [{
                type: Input
            }], excludedCountries: [{
                type: Input
            }], autocomplete: [{
                type: Input
            }], language: [{
                type: Input
            }], name: [{
                type: Input
            }], error: [{
                type: Input
            }], cleareable: [{
                type: Input
            }], formControl: [{
                type: Input
            }], statesAutocompleteRef: [{
                type: ViewChild,
                args: ["countryAutocomplete"]
            }], autocompleteTrigger: [{
                type: ViewChild,
                args: [MatAutocompleteTrigger]
            }], inputElement: [{
                type: ViewChild,
                args: ["inputElement"]
            }], onCountrySelected: [{
                type: Output
            }], value: [{
                type: Input
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWF0LXNlbGVjdC1jb3VudHJ5LmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL3Byb2plY3RzL2FuZ3VsYXItbWF0ZXJpYWwtZXh0ZW5zaW9ucy9zZWxlY3QtY291bnRyeS9zcmMvbGliL21hdC1zZWxlY3QtY291bnRyeS5jb21wb25lbnQudHMiLCIuLi8uLi8uLi8uLi8uLi9wcm9qZWN0cy9hbmd1bGFyLW1hdGVyaWFsLWV4dGVuc2lvbnMvc2VsZWN0LWNvdW50cnkvc3JjL2xpYi9tYXQtc2VsZWN0LWNvdW50cnkuY29tcG9uZW50Lmh0bWwiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUVMLFNBQVMsRUFDVCxZQUFZLEVBQ1osVUFBVSxFQUNWLE1BQU0sRUFDTixLQUFLLEVBSUwsTUFBTSxFQUVOLFNBQVMsR0FDVixNQUFNLGVBQWUsQ0FBQztBQUN2QixPQUFPLEVBSUwsaUJBQWlCLEdBQ2xCLE1BQU0sZ0JBQWdCLENBQUM7QUFDeEIsT0FBTyxFQUdMLDRCQUE0QixJQUFJLHNCQUFzQixHQUN2RCxNQUFNLHVDQUF1QyxDQUFDO0FBRS9DLE9BQU8sRUFBRSxlQUFlLEVBQUUsYUFBYSxFQUFFLFNBQVMsRUFBRSxPQUFPLEVBQUUsTUFBTSxNQUFNLENBQUM7QUFDMUUsT0FBTyxFQUFFLFlBQVksRUFBRSxTQUFTLEVBQUUsU0FBUyxFQUFFLE1BQU0sZ0JBQWdCLENBQUM7QUFDcEUsT0FBTyxFQUFFLHlCQUF5QixFQUFFLE1BQU0sVUFBVSxDQUFDOzs7Ozs7Ozs7OztBQW9CckQ7Ozs7R0FJRztBQWFILE1BQU0sT0FBTyx5QkFBeUI7SUFnRHBDLFlBQzhELElBQVksRUFDaEUsS0FBd0I7UUFENEIsU0FBSSxHQUFKLElBQUksQ0FBUTtRQUNoRSxVQUFLLEdBQUwsS0FBSyxDQUFtQjtRQS9DekIsZUFBVSxHQUF1QixTQUFTLENBQUM7UUFDM0MsY0FBUyxHQUFjLEVBQUUsQ0FBQztRQUUxQixnQkFB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S0FBSyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XG4gIENoYW5nZURldGVjdG9yUmVmLFxuICBDb21wb25lbnQsXG4gIEV2ZW50RW1pdHRlcixcbiAgZm9yd2FyZFJlZixcbiAgSW5qZWN0LFxuICBJbnB1dCxcbiAgT25DaGFuZ2VzLFxuICBPbkRlc3Ryb3ksXG4gIE9uSW5pdCxcbiAgT3V0cHV0LFxuICBTaW1wbGVDaGFuZ2VzLFxuICBWaWV3Q2hpbGQsXG59IGZyb20gXCJAYW5ndWxhci9jb3JlXCI7XG5pbXBvcnQge1xuICBDb250cm9sVmFsdWVBY2Nlc3NvcixcbiAgRm9ybUNvbnRyb2wsXG4gIEZvcm1Db250cm9sTmFtZSxcbiAgTkdfVkFMVUVfQUNDRVNTT1IsXG59IGZyb20gXCJAYW5ndWxhci9mb3Jtc1wiO1xuaW1wb3J0IHtcbiAgTWF0TGVnYWN5QXV0b2NvbXBsZXRlIGFzIE1hdEF1dG9jb21wbGV0ZSxcbiAgTWF0TGVnYWN5QXV0b2NvbXBsZXRlU2VsZWN0ZWRFdmVudCBhcyBNYXRBdXRvY29tcGxldGVTZWxlY3RlZEV2ZW50LFxuICBNYXRMZWdhY3lBdXRvY29tcGxldGVUcmlnZ2VyIGFzIE1hdEF1dG9jb21wbGV0ZVRyaWdnZXIsXG59IGZyb20gXCJAYW5ndWxhci9tYXRlcmlhbC9sZWdhY3ktYXV0b2NvbXBsZXRlXCI7XG5pbXBvcnQgeyBNYXRMZWdhY3lGb3JtRmllbGRBcHBlYXJhbmNlIGFzIE1hdEZvcm1GaWVsZEFwcGVhcmFuY2UgfSBmcm9tIFwiQGFuZ3VsYXIvbWF0ZXJpYWwvbGVnYWN5LWZvcm0tZmllbGRcIjtcbmltcG9ydCB7IEJlaGF2aW9yU3ViamVjdCwgY29tYmluZUxhdGVzdCwgZnJvbUV2ZW50LCBTdWJqZWN0IH0gZnJvbSBcInJ4anNcIjtcbmltcG9ydCB7IGRlYm91bmNlVGltZSwgc3RhcnRXaXRoLCB0YWtlVW50aWwgfSBmcm9tIFwicnhqcy9vcGVyYXRvcnNcIjtcbmltcG9ydCB7IE1hdFNlbGVjdENvdW50cnlMYW5nVG9rZW4gfSBmcm9tIFwiLi90b2tlbnNcIjtcbmltcG9ydCB7IE1hdExlZ2FjeUlucHV0IGFzIE1hdElucHV0IH0gZnJvbSBcIkBhbmd1bGFyL21hdGVyaWFsL2xlZ2FjeS1pbnB1dFwiO1xuXG4vKipcbiAqIENvdW50cnkgaW50ZXJmYWNlIElTTyAzMTY2XG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgQ291bnRyeSB7XG4gIG5hbWU6IHN0cmluZztcbiAgYWxwaGEyQ29kZTogc3RyaW5nO1xuICBhbHBoYTNDb2RlOiBzdHJpbmc7XG4gIG51bWVyaWNDb2RlOiBzdHJpbmc7XG4gIGNhbGxpbmdDb2RlOiBzdHJpbmc7XG59XG5cbnR5cGUgT3B0aW9uYWw8VCwgSyBleHRlbmRzIGtleW9mIFQ+ID0gT21pdDxULCBLPiAmIFBhcnRpYWw8VD47XG50eXBlIENvdW50cnlPcHRpb25hbE1hbmRhdG9yeUFscGhhMkNvZGUgPSBPcHRpb25hbDxcbiAgQ291bnRyeSxcbiAgXCJhbHBoYTNDb2RlXCIgfCBcIm5hbWVcIiB8IFwiY2FsbGluZ0NvZGVcIiB8IFwibnVtZXJpY0NvZGVcIlxuPjtcblxuLyoqXG4gKiBAYXV0aG9yIEFudGhvbnkgTmFoYXNcbiAqIEBzaW5jZSAxMS4xOVxuICogQHZlcnNpb24gMi4xLjBcbiAqL1xuQENvbXBvbmVudCh7XG4gIHNlbGVjdG9yOiBcIm1hdC1zZWxlY3QtY291bnRyeVwiLFxuICB0ZW1wbGF0ZVVybDogXCJtYXQtc2VsZWN0LWNvdW50cnkuY29tcG9uZW50Lmh0bWxcIixcbiAgc3R5bGVVcmxzOiBbXCJtYXQtc2VsZWN0LWNvdW50cnkuY29tcG9uZW50LnNjc3NcIl0sXG4gIHByb3ZpZGVyczogW1xuICAgIHtcbiAgICAgIHByb3ZpZGU6IE5HX1ZBTFVFX0FDQ0VTU09SLFxuICAgICAgdXNlRXhpc3Rpbmc6IGZvcndhcmRSZWYoKCkgPT4gTWF0U2VsZWN0Q291bnRyeUNvbXBvbmVudCksXG4gICAgICBtdWx0aTogdHJ1ZSxcbiAgICB9LFxuICBdLFxufSlcbmV4cG9ydCBjbGFzcyBNYXRTZWxlY3RDb3VudHJ5Q29tcG9uZW50XG4gIGltcGxlbWVudHMgT25Jbml0LCBPbkNoYW5nZXMsIE9uRGVzdHJveSwgQ29udHJvbFZhbHVlQWNjZXNzb3JcbntcbiAgQElucHV0KCkgYXBwZWFyYW5jZTogXCJmaWxsXCIgfCBcIm91dGxpbmVcIiA9IFwib3V0bGluZVwiO1xuICBASW5wdXQoKSBjb3VudHJpZXM6IENvdW50cnlbXSA9IFtdO1xuICBASW5wdXQoKSBsYWJlbDogc3RyaW5nO1xuICBASW5wdXQoKSBwbGFjZUhvbGRlciA9IFwiU2VsZWN0IGNvdW50cnlcIjtcbiAgQElucHV0KCkgcmVxdWlyZWQ6IGJvb2xlYW47XG4gIEBJbnB1dCgpIGRpc2FibGVkOiBib29sZWFuO1xuICBASW5wdXQoKSBudWxsYWJsZTogYm9vbGVhbjtcbiAgQElucHV0KCkgcmVhZG9ubHk6IGJvb2xlYW47XG4gIEBJbnB1dCgpIHRhYkluZGV4OiBudW1iZXIgfCBzdHJpbmc7XG4gIEBJbnB1dCgpIGNsYXNzOiBzdHJpbmc7XG4gIEBJbnB1dCgpIGl0ZW1zTG9hZFNpemU6IG51bWJlcjtcbiAgQElucHV0KCkgbG9hZGluZzogYm9vbGVhbjtcbiAgQElucHV0KCkgc2hvd0NhbGxpbmdDb2RlID0gZmFsc2U7XG4gIEBJbnB1dCgpIGV4Y2x1ZGVkQ291bnRyaWVzOiBDb3VudHJ5T3B0aW9uYWxNYW5kYXRvcnlBbHBoYTJDb2RlW10gPSBbXTtcbiAgQElucHV0KCkgYXV0b2NvbXBsZXRlOiBzdHJpbmc7XG4gIEBJbnB1dCgpIGxhbmd1YWdlOiBzdHJpbmc7XG4gIEBJbnB1dCgpIG5hbWU6IHN0cmluZyA9IFwiY291bnRyeVwiO1xuICBASW5wdXQoKSBlcnJvcjogc3RyaW5nID0gXCJcIjtcbiAgQElucHV0KCkgY2xlYXJlYWJsZTogYm9vbGVhbiA9IGZhbHNlO1xuICBASW5wdXQoKSBmb3JtQ29udHJvbD86IEZvcm1Db250cm9sIHwgdW5kZWZpbmVkID0gdW5kZWZpbmVkO1xuXG4gIEBWaWV3Q2hpbGQoXCJjb3VudHJ5QXV0b2NvbXBsZXRlXCIpIHN0YXRlc0F1dG9jb21wbGV0ZVJlZjogTWF0QXV0b2NvbXBsZXRlO1xuICBAVmlld0NoaWxkKE1hdEF1dG9jb21wbGV0ZVRyaWdnZXIpXG4gIGF1dG9jb21wbGV0ZVRyaWdnZXI6IE1hdEF1dG9jb21wbGV0ZVRyaWdnZXI7XG4gIEBWaWV3Q2hpbGQoXCJpbnB1dEVsZW1lbnRcIikgaW5wdXRFbGVtZW50OiBNYXRJbnB1dDtcblxuICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6IG5vLW91dHB1dC1vbi1wcmVmaXhcbiAgQE91dHB1dCgpIG9uQ291bnRyeVNlbGVjdGVkOiBFdmVudEVtaXR0ZXI8Q291bnRyeT4gPVxuICAgIG5ldyBFdmVudEVtaXR0ZXI8Q291bnRyeT4oKTtcblxuICBmaWx0ZXJlZE9wdGlvbnM6IENvdW50cnlbXTtcbiAgZGI6IENvdW50cnlbXTtcbiAgbG9hZGluZ0RCOiBib29sZWFuO1xuICBkZWJvdW5jZVRpbWUgPSAzMDA7XG4gIGZpbHRlclN0cmluZyA9IFwiXCI7XG5cbiAgcHJpdmF0ZSBtb2RlbENoYW5nZWQ6IFN1YmplY3Q8c3RyaW5nPiA9IG5ldyBTdWJqZWN0PHN0cmluZz4oKTtcbiAgcHJpdmF0ZSBjb3VudHJpZXMkID0gbmV3IEJlaGF2aW9yU3ViamVjdDxDb3VudHJ5W10+KFtdKTtcbiAgcHJpdmF0ZSBleGNsdWRlZENvdW50cmllcyQgPSBuZXcgQmVoYXZpb3JTdWJqZWN0PENvdW50cnlbXT4oW10pO1xuICBwcml2YXRlIHZhbHVlJCA9IG5ldyBCZWhhdmlvclN1YmplY3Q8Q291bnRyeT4obnVsbCk7XG4gIHByaXZhdGUgdW5zdWJzY3JpYmUkID0gbmV3IFN1YmplY3Q8dm9pZD4oKTtcblxuICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6IHZhcmlhYmxlLW5hbWVcbiAgcHJpdmF0ZSBfdmFsdWU6IENvdW50cnk7XG5cbiAgY29uc3RydWN0b3IoXG4gICAgQEluamVjdChmb3J3YXJkUmVmKCgpID0+IE1hdFNlbGVjdENvdW50cnlMYW5nVG9rZW4pKSBwdWJsaWMgaTE4bjogc3RyaW5nLFxuICAgIHByaXZhdGUgY2RSZWY6IENoYW5nZURldGVjdG9yUmVmXG4gICkge31cblxuICBnZXQgdmFsdWUoKTogQ291bnRyeSB7XG4gICAgcmV0dXJuIHRoaXMuX3ZhbHVlO1xuICB9XG5cbiAgQElucHV0KClcbiAgc2V0IHZhbHVlKHZhbHVlOiBDb3VudHJ5KSB7XG4gICAgLy8gc2V0dGluZyBhIHZhbHVlIG9uIGEgcmVhY3RpdmUgZm9ybSAoZm9ybUNvbnRyb2xOYW1lKSBkb2Vzbid0IHRyaWdnZXIgbmdPbkNoYW5nZXMgYnV0IGl0IGRvZXMgY2FsbCB0aGlzIHNldHRlclxuICAgIHRoaXMudmFsdWUkLm5leHQodmFsdWUpO1xuICB9XG5cbiAgcHJvcGFnYXRlQ2hhbmdlID0gKF86IGFueSkgPT4ge307XG5cbiAgbmdPbkluaXQoKSB7XG4gICAgY29tYmluZUxhdGVzdChbdGhpcy5jb3VudHJpZXMkLCB0aGlzLnZhbHVlJCwgdGhpcy5leGNsdWRlZENvdW50cmllcyRdKVxuICAgICAgLnBpcGUoXG4gICAgICAgIC8vIGZpeGluZyB0aGUgZ2xpdGNoIG9uIGNvbWJpbmVMYXRlc3QgaHR0cHM6Ly9ibG9nLnN0cm9uZ2JyZXcuaW8vY29tYmluZS1sYXRlc3QtZ2xpdGNoL1xuICAgICAgICBkZWJvdW5jZVRpbWUoMCksXG4gICAgICAgIHRha2VVbnRpbCh0aGlzLnVuc3Vic2NyaWJlJClcbiAgICAgIClcbiAgICAgIC5zdWJzY3JpYmUoKFtjb3VudHJpZXMsIHZhbHVlLCBleGNsdWRlZENvdW50cmllc10pID0+IHtcbiAgICAgICAgdGhpcy5fcG9wdWxhdGVDb3VudHJpZXMoY291bnRyaWVzLCBleGNsdWRlZENvdW50cmllcyk7XG4gICAgICAgIGlmICh2YWx1ZSkge1xuICAgICAgICAgIHRoaXMuX3NldFZhbHVlKHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICBpZiAoIXRoaXMuY291bnRyaWVzLmxlbmd0aCkge1xuICAgICAgdGhpcy5fbG9hZENvdW50cmllc0Zyb21EYigpO1xuICAgIH1cblxuICAgIHRoaXMubW9kZWxDaGFuZ2VkXG4gICAgICAucGlwZShcbiAgICAgICAgc3RhcnRXaXRoKFwiXCIpLFxuICAgICAgICBkZWJvdW5jZVRpbWUodGhpcy5kZWJvdW5jZVRpbWUpLFxuICAgICAgICB0YWtlVW50aWwodGhpcy51bnN1YnNjcmliZSQpXG4gICAgICApXG4gICAgICAuc3Vic2NyaWJlKCh2YWx1ZSkgPT4ge1xuICAgICAgICB0aGlzLmZpbHRlclN0cmluZyA9IHZhbHVlO1xuICAgICAgICB0aGlzLl9maWx0ZXIodmFsdWUpO1xuICAgICAgfSk7XG4gIH1cblxuICBuZ09uQ2hhbmdlcyhjaGFuZ2VzOiBTaW1wbGVDaGFuZ2VzKSB7XG4gICAgaWYgKGNoYW5nZXMuY291bnRyaWVzPy5jdXJyZW50VmFsdWUpIHtcbiAgICAgIHRoaXMuY291bnRyaWVzJC5uZXh0KGNoYW5nZXMuY291bnRyaWVzLmN1cnJlbnRWYWx1ZSk7XG4gICAgfVxuXG4gICAgaWYgKGNoYW5nZXMuZXhjbHVkZWRDb3VudHJpZXM/LmN1cnJlbnRWYWx1ZSkge1xuICAgICAgdGhpcy5leGNsdWRlZENvdW50cmllcyQubmV4dChjaGFuZ2VzLmV4Y2x1ZGVkQ291bnRyaWVzLmN1cnJlbnRWYWx1ZSk7XG4gICAgfVxuXG4gICAgaWYgKFxuICAgICAgY2hhbmdlcy5sYW5ndWFnZT8uY3VycmVudFZhbHVlICYmXG4gICAgICBjaGFuZ2VzLmxhbmd1YWdlLmN1cnJlbnRWYWx1ZSAhPT0gY2hhbmdlcy5sYW5ndWFnZS5wcmV2aW91c1ZhbHVlXG4gICAgKSB7XG4gICAgICBjb25zb2xlLmxvZyhcIkNoYW5nZSBvbiBsYW5ndWFnZSBkZXRlY3RlZFwiLCBjaGFuZ2VzLmxhbmd1YWdlKTtcbiAgICAgIGxldCBsYXN0VmFsdWUgPSB0aGlzLl92YWx1ZTtcbiAgICAgIHRoaXMuZmlsdGVyU3RyaW5nID0gXCJcIjtcbiAgICAgIHRoaXMuaW5wdXRDaGFuZ2VkKFwiXCIpO1xuICAgICAgdGhpcy5fc2V0VmFsdWUobnVsbCk7XG4gICAgICB0aGlzLm9uQ291bnRyeVNlbGVjdGVkLmVtaXQobnVsbCk7XG4gICAgICB0aGlzLl9sb2FkQ291bnRyaWVzRnJvbURiKGxhc3RWYWx1ZT8uYWxwaGEyQ29kZSk7XG4gICAgfVxuICB9XG5cbiAgb25CbHVyKCkge1xuICAgIGlmIChcbiAgICAgIHRoaXMubnVsbGFibGUgJiZcbiAgICAgICF0aGlzLmlucHV0RWxlbWVudC52YWx1ZSAmJlxuICAgICAgdGhpcy5zdGF0ZXNBdXRvY29tcGxldGVSZWYucGFuZWxcbiAgICApIHtcbiAgICAgIHRoaXMuX3NldFZhbHVlKG51bGwpO1xuICAgICAgdGhpcy5vbkNvdW50cnlTZWxlY3RlZC5lbWl0KG51bGwpO1xuICAgIH1cbiAgfVxuXG4gIG9uT3B0aW9uc1NlbGVjdGVkKCRldmVudDogTWF0QXV0b2NvbXBsZXRlU2VsZWN0ZWRFdmVudCkge1xuICAgIGNvbnN0IHZhbHVlID0gdGhpcy5jb3VudHJpZXMuZmluZChcbiAgICAgIChjb3VudHJ5KSA9PiBjb3VudHJ5Lm5hbWUgPT09ICRldmVudC5vcHRpb24udmFsdWVcbiAgICApO1xuICAgIHRoaXMuX3NldFZhbHVlKHZhbHVlKTtcbiAgICB0aGlzLm9uQ291bnRyeVNlbGVjdGVkLmVtaXQodmFsdWUpO1xuICB9XG5cbiAgd3JpdGVWYWx1ZShvYmo6IGFueSk6IHZvaWQge1xuICAgIGlmIChvYmopIHtcbiAgICAgIHRoaXMudmFsdWUgPSBvYmo7XG4gICAgfVxuICB9XG5cbiAgcmVnaXN0ZXJPbkNoYW5nZShmbjogYW55KTogdm9pZCB7XG4gICAgdGhpcy5wcm9wYWdhdGVDaGFuZ2UgPSBmbjtcbiAgfVxuXG4gIHJlZ2lzdGVyT25Ub3VjaGVkKGZuOiBhbnkpOiB2b2lkIHtcbiAgICAvLyB0aHJvdyBuZXcgRXJyb3IoJ01ldGhvZCBub3QgaW1wbGVtZW50ZWQuJyk7XG4gIH1cblxuICBzZXREaXNhYmxlZFN0YXRlPyhpc0Rpc2FibGVkOiBib29sZWFuKTogdm9pZCB7XG4gICAgdGhpcy5kaXNhYmxlZCA9IGlzRGlzYWJsZWQ7XG4gIH1cblxuICBhdXRvY29tcGxldGVTY3JvbGwoKSB7XG4gICAgaWYgKHRoaXMuaXRlbXNMb2FkU2l6ZSkge1xuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIGlmIChcbiAgICAgICAgICB0aGlzLnN0YXRlc0F1dG9jb21wbGV0ZVJlZiAmJlxuICAgICAgICAgIHRoaXMuYXV0b2NvbXBsZXRlVHJpZ2dlciAmJlxuICAgICAgICAgIHRoaXMuc3RhdGVzQXV0b2NvbXBsZXRlUmVmLnBhbmVsXG4gICAgICAgICkge1xuICAgICAgICAgIGZyb21FdmVudCh0aGlzLnN0YXRlc0F1dG9jb21wbGV0ZVJlZi5wYW5lbC5uYXRpdmVFbGVtZW50LCBcInNjcm9sbFwiKVxuICAgICAgICAgICAgLnBpcGUodGFrZVVudGlsKHRoaXMuYXV0b2NvbXBsZXRlVHJpZ2dlci5wYW5lbENsb3NpbmdBY3Rpb25zKSlcbiAgICAgICAgICAgIC5zdWJzY3JpYmUoKCkgPT4ge1xuICAgICAgICAgICAgICBjb25zdCBzY3JvbGxUb3AgPVxuICAgICAgICAgICAgICAgIHRoaXMuc3RhdGVzQXV0b2NvbXBsZXRlUmVmLnBhbmVsLm5hdGl2ZUVsZW1lbnQuc2Nyb2xsVG9wO1xuICAgICAgICAgICAgICBjb25zdCBzY3JvbGxIZWlnaHQgPVxuICAgICAgICAgICAgICAgIHRoaXMuc3RhdGVzQXV0b2NvbXBsZXRlUmVmLnBhbmVsLm5hdGl2ZUVsZW1lbnQuc2Nyb2xsSGVpZ2h0O1xuICAgICAgICAgICAgICBjb25zdCBlbGVtZW50SGVpZ2h0ID1cbiAgICAgICAgICAgICAgICB0aGlzLnN0YXRlc0F1dG9jb21wbGV0ZVJlZi5wYW5lbC5uYXRpdmVFbGVtZW50LmNsaWVudEhlaWdodDtcbiAgICAgICAgICAgICAgY29uc3QgYXRCb3R0b20gPSBzY3JvbGxIZWlnaHQgPT09IHNjcm9sbFRvcCArIGVsZW1lbnRIZWlnaHQ7XG4gICAgICAgICAgICAgIGlmIChhdEJvdHRvbSkge1xuICAgICAgICAgICAgICAgIC8vIGZldGNoIG1vcmUgZGF0YSBpZiBub3QgZmlsdGVyZWRcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5maWx0ZXJTdHJpbmcgPT09IFwiXCIpIHtcbiAgICAgICAgICAgICAgICAgIGNvbnN0IGZyb21JbmRleCA9IHRoaXMuZmlsdGVyZWRPcHRpb25zLmxlbmd0aDtcbiAgICAgICAgICAgICAgICAgIGNvbnN0IHRvSW5kZXg6IG51bWJlciA9XG4gICAgICAgICAgICAgICAgICAgICt0aGlzLmZpbHRlcmVkT3B0aW9ucy5sZW5ndGggKyArdGhpcy5pdGVtc0xvYWRTaXplO1xuICAgICAgICAgICAgICAgICAgdGhpcy5maWx0ZXJlZE9wdGlvbnMgPSBbXG4gICAgICAgICAgICAgICAgICAgIC4uLnRoaXMuZmlsdGVyZWRPcHRpb25zLFxuICAgICAgICAgICAgICAgICAgICAuLi50aGlzLmNvdW50cmllcy5zbGljZShmcm9tSW5kZXgsIHRvSW5kZXgpLFxuICAgICAgICAgICAgICAgICAgXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICBpbnB1dENoYW5nZWQodmFsdWU6IHN0cmluZyk6IHZvaWQge1xuICAgIHRoaXMubW9kZWxDaGFuZ2VkLm5leHQodmFsdWUpO1xuICB9XG5cbiAgbmdPbkRlc3Ryb3koKTogdm9pZCB7XG4gICAgdGhpcy51bnN1YnNjcmliZSQubmV4dCgpO1xuICAgIHRoaXMudW5zdWJzY3JpYmUkLmNvbXBsZXRlKCk7XG4gIH1cblxuICBjbGVhcigpIHtcbiAgICB0aGlzLmZpbHRlclN0cmluZyA9IFwiXCI7XG4gICAgdGhpcy5pbnB1dENoYW5nZWQoXCJcIik7XG4gICAgdGhpcy5fc2V0VmFsdWUobnVsbCk7XG4gICAgdGhpcy5vbkNvdW50cnlTZWxlY3RlZC5lbWl0KG51bGwpO1xuICB9XG5cbiAgcHJpdmF0ZSBfbG9hZENvdW50cmllc0Zyb21EYihhbHBoYTJDb2RlPzogc3RyaW5nKTogdm9pZCB7XG4gICAgdGhpcy5sb2FkaW5nREIgPSB0cnVlO1xuICAgIHRoaXMuX2ltcG9ydExhbmcoKVxuICAgICAgLnRoZW4oKHJlcykgPT4ge1xuICAgICAgICB0aGlzLmNvdW50cmllcyQubmV4dChyZXMpO1xuICAgICAgICB0aGlzLl9zZXRWYWx1ZShyZXMuZmluZCgoZWwpID0+IGVsLmFscGhhMkNvZGUgPT0gYWxwaGEyQ29kZSkpO1xuICAgICAgfSlcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiBjb25zb2xlLmVycm9yKFwiRXJyb3I6IFwiICsgZXJyKSlcbiAgICAgIC5maW5hbGx5KCgpID0+ICh0aGlzLmxvYWRpbmdEQiA9IGZhbHNlKSk7XG4gIH1cblxuICBwcml2YXRlIF9wb3B1bGF0ZUNvdW50cmllcyhcbiAgICBjb3VudHJpZXM6IENvdW50cnlbXSxcbiAgICBleGNsdWRlZENvdW50cmllczogQ291bnRyeU9wdGlvbmFsTWFuZGF0b3J5QWxwaGEyQ29kZVtdXG4gICk6IHZvaWQge1xuICAgIGNvbnN0IGV4Y2x1ZGVDb3VudHJpZXMgPSBleGNsdWRlZENvdW50cmllcy5tYXAoKGMpID0+IGMuYWxwaGEyQ29kZSk7XG4gICAgdGhpcy5jb3VudHJpZXMgPSBjb3VudHJpZXMuZmlsdGVyKFxuICAgICAgKGMpID0+ICFleGNsdWRlQ291bnRyaWVzLmluY2x1ZGVzKGMuYWxwaGEyQ29kZSlcbiAgICApO1xuICB9XG5cbiAgcHJpdmF0ZSBfc2V0VmFsdWUodmFsdWU6IENvdW50cnkgfCBudWxsKTogdm9pZCB7XG4gICAgaWYgKHZhbHVlICYmICghdmFsdWUubmFtZSB8fCB2YWx1ZS5uYW1lID09PSBcIlVua25vd25cIikpIHtcbiAgICAgIC8vIGxvb2t1cCBuYW1lIGJhc2VkIG9uIGFscGhhMiB2YWx1ZXMgY291bGQgYmUgZXh0ZW5kZWQgdG8gbG9va3VwIG9uIG90aGVyIHZhbHVlcyB0b29cbiAgICAgIGNvbnN0IG1hdGNoaW5nQ291bnRyeSA9IHRoaXMuY291bnRyaWVzLmZpbmQoXG4gICAgICAgIChjKSA9PiBjLmFscGhhMkNvZGUgPT09IHZhbHVlLmFscGhhMkNvZGVcbiAgICAgICk7XG4gICAgICBpZiAoISFtYXRjaGluZ0NvdW50cnkpIHtcbiAgICAgICAgdmFsdWUgPSBtYXRjaGluZ0NvdW50cnk7XG4gICAgICB9XG4gICAgfVxuICAgIHRoaXMuX3ZhbHVlID0gdmFsdWU/Lm5hbWUgPyB2YWx1ZSA6IG51bGw7XG4gICAgdGhpcy5wcm9wYWdhdGVDaGFuZ2UodGhpcy5fdmFsdWUpO1xuICB9XG5cbiAgcHJpdmF0ZSBfaW1wb3J0TGFuZygpOiBQcm9taXNlPGFueT4ge1xuICAgIGNvbnN0IGxhbmcgPSB0aGlzLmxhbmd1YWdlIHx8IHRoaXMuaTE4bjtcbiAgICBzd2l0Y2ggKGxhbmcpIHtcbiAgICAgIGNhc2UgXCJiclwiOlxuICAgICAgICByZXR1cm4gaW1wb3J0KFwiLi9pMThuL2JyXCIpXG4gICAgICAgICAgLnRoZW4oKHJlc3VsdCkgPT4gcmVzdWx0LkNPVU5UUklFU19EQl9CUilcbiAgICAgICAgICAudGhlbigoeSkgPT4geSk7XG4gICAgICBjYXNlIFwiYnlcIjpcbiAgICAgICAgcmV0dXJuIGltcG9ydChcIi4vaTE4bi9ieVwiKVxuICAgICAgICAgIC50aGVuKChyZXN1bHQpID0+IHJlc3VsdC5DT1VOVFJJRVNfREJfQlkpXG4gICAgICAgICAgLnRoZW4oKHkpID0+IHkpO1xuICAgICAgY2FzZSBcImRlXCI6XG4gICAgICAgIHJldHVybiBpbXBvcnQoXCIuL2kxOG4vZGVcIilcbiAgICAgICAgICAudGhlbigocmVzdWx0KSA9PiByZXN1bHQuQ09VTlRSSUVTX0RCX0RFKVxuICAgICAgICAgIC50aGVuKCh5KSA9PiB5KTtcbiAgICAgIGNhc2UgXCJlc1wiOlxuICAgICAgICByZXR1cm4gaW1wb3J0KFwiLi9pMThuL2VzXCIpXG4gICAgICAgICAgLnRoZW4oKHJlc3VsdCkgPT4gcmVzdWx0LkNPVU5UUklFU19EQl9FUylcbiAgICAgICAgICAudGhlbigoeSkgPT4geSk7XG4gICAgICBjYXNlIFwiZnJcIjpcbiAgICAgICAgcmV0dXJuIGltcG9ydChcIi4vaTE4bi9mclwiKVxuICAgICAgICAgIC50aGVuKChyZXN1bHQpID0+IHJlc3VsdC5DT1VOVFJJRVNfREJfRlIpXG4gICAgICAgICAgLnRoZW4oKHkpID0+IHkpO1xuICAgICAgY2FzZSBcImhyXCI6XG4gICAgICAgIHJldHVybiBpbXBvcnQoXCIuL2kxOG4vaHJcIilcbiAgICAgICAgICAudGhlbigocmVzdWx0KSA9PiByZXN1bHQuQ09VTlRSSUVTX0RCX0hSKVxuICAgICAgICAgIC50aGVuKCh5KSA9PiB5KTtcbiAgICAgIGNhc2UgXCJodVwiOlxuICAgICAgICByZXR1cm4gaW1wb3J0KFwiLi9pMThuL2h1XCIpXG4gICAgICAgICAgLnRoZW4oKHJlc3VsdCkgPT4gcmVzdWx0LkNPVU5UUklFU19EQl9IVSlcbiAgICAgICAgICAudGhlbigoeSkgPT4geSk7XG4gICAgICBjYXNlIFwiaXRcIjpcbiAgICAgICAgcmV0dXJuIGltcG9ydChcIi4vaTE4bi9pdFwiKVxuICAgICAgICAgIC50aGVuKChyZXN1bHQpID0+IHJlc3VsdC5DT1VOVFJJRVNfREJfSVQpXG4gICAgICAgICAgLnRoZW4oKHkpID0+IHkpO1xuICAgICAgY2FzZSBcIm5sXCI6XG4gICAgICAgIHJldHVybiBpbXBvcnQoXCIuL2kxOG4vbmxcIilcbiAgICAgICAgICAudGhlbigocmVzdWx0KSA9PiByZXN1bHQuQ09VTlRSSUVTX0RCX05MKVxuICAgICAgICAgIC50aGVuKCh5KSA9PiB5KTtcbiAgICAgIGNhc2UgXCJwdFwiOlxuICAgICAgICByZXR1cm4gaW1wb3J0KFwiLi9pMThuL3B0XCIpXG4gICAgICAgICAgLnRoZW4oKHJlc3VsdCkgPT4gcmVzdWx0LkNPVU5UUklFU19EQl9QVClcbiAgICAgICAgICAudGhlbigoeSkgPT4geSk7XG4gICAgICBjYXNlIFwicnVcIjpcbiAgICAgICAgcmV0dXJuIGltcG9ydChcIi4vaTE4bi9ydVwiKVxuICAgICAgICAgIC50aGVuKChyZXN1bHQpID0+IHJlc3VsdC5DT1VOVFJJRVNfREJfUlUpXG4gICAgICAgICAgLnRoZW4oKHkpID0+IHkpO1xuICAgICAgY2FzZSBcInVhXCI6XG4gICAgICAgIHJldHVybiBpbXBvcnQoXCIuL2kxOG4vdWFcIilcbiAgICAgICAgICAudGhlbigocmVzdWx0KSA9PiByZXN1bHQuQ09VTlRSSUVTX0RCX1VBKVxuICAgICAgICAgIC50aGVuKCh5KSA9PiB5KTtcbiAgICAgIGNhc2UgXCJnbFwiOlxuICAgICAgICByZXR1cm4gaW1wb3J0KFwiLi9pMThuL2dsXCIpXG4gICAgICAgICAgLnRoZW4oKHJlc3VsdCkgPT4gcmVzdWx0LkNPVU5UUklFU19EQl9HTClcbiAgICAgICAgICAudGhlbigoeSkgPT4geSk7XG4gICAgICBjYXNlIFwiZXVcIjpcbiAgICAgICAgcmV0dXJuIGltcG9ydChcIi4vaTE4bi9ldVwiKVxuICAgICAgICAgIC50aGVuKChyZXN1bHQpID0+IHJlc3VsdC5DT1VOVFJJRVNfREJfRVUpXG4gICAgICAgICAgLnRoZW4oKHkpID0+IHkpO1xuICAgICAgY2FzZSBcImNhXCI6XG4gICAgICAgIHJldHVybiBpbXBvcnQoXCIuL2kxOG4vY2FcIilcbiAgICAgICAgICAudGhlbigocmVzdWx0KSA9PiByZXN1bHQuQ09VTlRSSUVTX0RCX0NBKVxuICAgICAgICAgIC50aGVuKCh5KSA9PiB5KTtcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBpbXBvcnQoXCIuL2kxOG4vZW5cIilcbiAgICAgICAgICAudGhlbigocmVzdWx0KSA9PiByZXN1bHQuQ09VTlRSSUVTX0RCKVxuICAgICAgICAgIC50aGVuKCh5KSA9PiB5KTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIF9maWx0ZXIodmFsdWU6IHN0cmluZykge1xuICAgIGNvbnN0IGZpbHRlclZhbHVlID0gdmFsdWUudG9Mb3dlckNhc2UoKTtcblxuICAgIC8vIGlmIG5vdCBmaWx0ZXJlZCwgZmV0Y2ggcmVkdWNlZCBhcnJheVxuICAgIGlmICh0aGlzLml0ZW1zTG9hZFNpemUgJiYgZmlsdGVyVmFsdWUgPT09IFwiXCIpIHtcbiAgICAgIHRoaXMuZmlsdGVyZWRPcHRpb25zID0gdGhpcy5jb3VudHJpZXMuc2xpY2UoMCwgdGhpcy5pdGVtc0xvYWRTaXplKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5maWx0ZXJlZE9wdGlvbnMgPSB0aGlzLmNvdW50cmllcy5maWx0ZXIoXG4gICAgICAgIChvcHRpb246IENvdW50cnkpID0+XG4gICAgICAgICAgb3B0aW9uLm5hbWUudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhmaWx0ZXJWYWx1ZSkgfHxcbiAgICAgICAgICBvcHRpb24uYWxwaGEyQ29kZS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKGZpbHRlclZhbHVlKSB8fFxuICAgICAgICAgIG9wdGlvbi5hbHBoYTNDb2RlLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoZmlsdGVyVmFsdWUpXG4gICAgICApO1xuICAgIH1cblxuICAgIC8vIG9wdGlvbnMgaW4gdGhlIFVJIGFyZSBub3QgdXBkYXRlZCB3aGVuIHRoaXMgY29tcG9uZW50IGlzIHVzZWQgd2l0aGluIGEgaG9zdCBjb21wb25lbnQgdGhhdCB1c2VzIE9uUHVzaFxuICAgIHRoaXMuY2RSZWYubWFya0ZvckNoZWNrKCk7XG4gIH1cbn1cbiIsIjxtYXQtZm9ybS1maWVsZCBbYXBwZWFyYW5jZV09XCJhcHBlYXJhbmNlXCI+XG4gIDxtYXQtbGFiZWwgKm5nSWY9XCJsYWJlbFwiPnt7IGxhYmVsIH19PC9tYXQtbGFiZWw+XG4gIDxtYXQtaWNvblxuICAgICpuZ0lmPVwidGhpcy52YWx1ZVwiXG4gICAgW3N2Z0ljb25dPVwidGhpcy52YWx1ZT8uYWxwaGEyQ29kZT8udG9Mb3dlckNhc2UoKVwiXG4gICAgY2xhc3M9XCJtci0xMiBzLTIwIHNlY29uZGFyeS10ZXh0XCJcbiAgICBtYXRTdWZmaXhcbiAgPjwvbWF0LWljb24+XG4gIDxpbnB1dFxuICAgICpuZ0lmPVwiISFmb3JtQ29udHJvbFwiXG4gICAgKGJsdXIpPVwib25CbHVyKClcIlxuICAgIChpbnB1dCk9XCJpbnB1dENoYW5nZWQoJGV2ZW50Py50YXJnZXQ/LnZhbHVlKVwiXG4gICAgW2NsYXNzXT1cImNsYXNzXCJcbiAgICBbbWF0QXV0b2NvbXBsZXRlXT1cInRoaXMuY291bnRyeUF1dG9jb21wbGV0ZVwiXG4gICAgW3BsYWNlaG9sZGVyXT1cInRoaXMucGxhY2VIb2xkZXJcIlxuICAgIFtyZWFkb25seV09XCJ0aGlzLnJlYWRvbmx5XCJcbiAgICBbdGFiSW5kZXhdPVwidGFiSW5kZXhcIlxuICAgIFt2YWx1ZV09XCJmb3JtQ29udHJvbC52YWx1ZT8ubmFtZVwiXG4gICAgW2Zvcm1Db250cm9sXT1cImZvcm1Db250cm9sXCJcbiAgICBbYXV0b2NvbXBsZXRlXT1cInRoaXMuYXV0b2NvbXBsZXRlXCJcbiAgICBbbmFtZV09XCJ0aGlzLm5hbWVcIlxuICAgIGFyaWEtbGFiZWw9XCJjb3VudHJ5XCJcbiAgICBtYXRJbnB1dFxuICAgIHR5cGU9XCJ0ZXh0XCJcbiAgICAjaW5wdXRFbGVtZW50XG4gIC8+XG4gIDxpbnB1dFxuICAgICpuZ0lmPVwiIWZvcm1Db250cm9sXCJcbiAgICAoYmx1cik9XCJvbkJsdXIoKVwiXG4gICAgKGlucHV0KT1cImlucHV0Q2hhbmdlZCgkZXZlbnQ/LnRhcmdldD8udmFsdWUpXCJcbiAgICBbY2xhc3NdPVwiY2xhc3NcIlxuICAgIFttYXRBdXRvY29tcGxldGVdPVwidGhpcy5jb3VudHJ5QXV0b2NvbXBsZXRlXCJcbiAgICBbcGxhY2Vob2xkZXJdPVwidGhpcy5wbGFjZUhvbGRlclwiXG4gICAgW3JlYWRvbmx5XT1cInRoaXMucmVhZG9ubHlcIlxuICAgIFt0YWJJbmRleF09XCJ0YWJJbmRleFwiXG4gICAgW3ZhbHVlXT1cIlxuICAgICAgc2hvd0NhbGxpbmdDb2RlXG4gICAgICAgID8gdGhpcy52YWx1ZVxuICAgICAgICAgID8gdGhpcy52YWx1ZT8ubmFtZSArICcgKCcgKyB0aGlzLnZhbHVlPy5jYWxsaW5nQ29kZSArICcpJ1xuICAgICAgICAgIDogJydcbiAgICAgICAgOiB0aGlzLnZhbHVlPy5uYW1lXG4gICAgXCJcbiAgICBbcmVxdWlyZWRdPVwidGhpcy5yZXF1aXJlZFwiXG4gICAgW2Rpc2FibGVkXT1cInRoaXMuZGlzYWJsZWQgfHwgdGhpcy5sb2FkaW5nREJcIlxuICAgIFthdXRvY29tcGxldGVdPVwidGhpcy5hdXRvY29tcGxldGVcIlxuICAgIFtuYW1lXT1cInRoaXMubmFtZVwiXG4gICAgYXJpYS1sYWJlbD1cImNvdW50cnlcIlxuICAgIG1hdElucHV0XG4gICAgdHlwZT1cInRleHRcIlxuICAgICNpbnB1dEVsZW1lbnRcbiAgLz5cbiAgPG1hdC1wcm9ncmVzcy1iYXJcbiAgICAqbmdJZj1cInRoaXMubG9hZGluZ0RCIHx8IHRoaXMubG9hZGluZ1wiXG4gICAgbW9kZT1cImJ1ZmZlclwiXG4gID48L21hdC1wcm9ncmVzcy1iYXI+XG4gIDxtYXQtYXV0b2NvbXBsZXRlXG4gICAgI2NvdW50cnlBdXRvY29tcGxldGU9XCJtYXRBdXRvY29tcGxldGVcIlxuICAgIChvcGVuZWQpPVwiYXV0b2NvbXBsZXRlU2Nyb2xsKClcIlxuICAgIChvcHRpb25TZWxlY3RlZCk9XCJvbk9wdGlvbnNTZWxlY3RlZCgkZXZlbnQpXCJcbiAgPlxuICAgIDxtYXQtb3B0aW9uICpuZ0Zvcj1cImxldCBjb3VudHJ5IG9mIGZpbHRlcmVkT3B0aW9uc1wiIFt2YWx1ZV09XCJjb3VudHJ5Py5uYW1lXCI+XG4gICAgICA8ZGl2IGNsYXNzPVwiZC1mbGV4XCI+XG4gICAgICAgIDxtYXQtaWNvbiBbc3ZnSWNvbl09XCJjb3VudHJ5Py5hbHBoYTJDb2RlPy50b0xvd2VyQ2FzZSgpXCI+PC9tYXQtaWNvbj5cbiAgICAgICAgPHNtYWxsXG4gICAgICAgICAgY2xhc3M9XCJjb3VudHJ5LWxpc3QtaXRlbVwiXG4gICAgICAgICAgW3RpdGxlXT1cIltjb3VudHJ5Py5uYW1lLCBjb3VudHJ5Py5hbHBoYTNDb2RlXSB8IGpvaW5TdHJpbmdzXCJcbiAgICAgICAgICAqbmdJZj1cIiFzaG93Q2FsbGluZ0NvZGVcIlxuICAgICAgICAgID57eyBbY291bnRyeT8ubmFtZSwgY291bnRyeT8uYWxwaGEzQ29kZV0gfCBqb2luU3RyaW5ncyB9fTwvc21hbGxcbiAgICAgICAgPlxuICAgICAgICA8c21hbGxcbiAgICAgICAgICBjbGFzcz1cImNvdW50cnktbGlzdC1pdGVtXCJcbiAgICAgICAgICBbdGl0bGVdPVwiXG4gICAgICAgICAgICBbY291bnRyeT8ubmFtZSwgJygnICsgY291bnRyeT8uY2FsbGluZ0NvZGUgKyAnKSddXG4gICAgICAgICAgICAgIHwgam9pblN0cmluZ3MgOiAnICdcbiAgICAgICAgICBcIlxuICAgICAgICAgICpuZ0lmPVwic2hvd0NhbGxpbmdDb2RlXCJcbiAgICAgICAgICA+e3tcbiAgICAgICAgICAgIFtjb3VudHJ5Py5uYW1lLCBcIihcIiArIGNvdW50cnk/LmNhbGxpbmdDb2RlICsgXCIpXCJdXG4gICAgICAgICAgICAgIHwgam9pblN0cmluZ3MgOiBcIiBcIlxuICAgICAgICAgIH19PC9zbWFsbFxuICAgICAgICA+XG4gICAgICA8L2Rpdj5cbiAgICA8L21hdC1vcHRpb24+XG4gIDwvbWF0LWF1dG9jb21wbGV0ZT5cbiAgPG1hdC1pY29uXG4gICAgY2xhc3M9XCJjdXJzb3ItcG9pbnRlciBwb3MtcmVsXCJcbiAgICBtYXRTdWZmaXhcbiAgICAqbmdJZj1cImNsZWFyZWFibGUgJiYgISF2YWx1ZVwiXG4gICAgKGNsaWNrKT1cImNsZWFyKClcIlxuICAgID5jYW5jZWw8L21hdC1pY29uXG4gID5cbiAgPG1hdC1lcnJvciAqbmdJZj1cImZvcm1Db250cm9sICYmIGZvcm1Db250cm9sLmludmFsaWRcIj57eyBlcnJvciB9fTwvbWF0LWVycm9yPlxuPC9tYXQtZm9ybS1maWVsZD5cbiJdfQ==